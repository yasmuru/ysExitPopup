!function(a){"use strict";a.fn.ysExit=function(b){function n(){a("body").append('<div class="ys-layer"></div> <div class="ys-container" id="ys-container"><div class="ys-box"><a class="ys-popup-close" href="#">x</a><div class="ys-popup-content"></div></div></div>');return a(".ys-popup-content").append(c[0].outerHTML),c.hide(),!0}function o(a){var b={};return Object.keys(d).forEach(function(c){b[c]=a.hasOwnProperty(c)?a[c]:d[c]}),b}function p(a,b){return function(){b.apply(a,arguments)}}var c=this;console.log(c);var d={width:"40%",height:"30%",target:"#ys-container",cookieValidity:1,closeOnOutsideClick:!0,delay:0,debug:!1,cookieName:"ysExit"},f=(n(),o(b)),g=document.querySelector(f.target),h=document.querySelector(".ys-layer"),i=document.querySelector(f.target+" .ys-popup-close"),j=document.querySelector(f.target+" .ys-box"),k=document.querySelector(f.target+" .ys-exit"),l={set:function(a,b,c){var d=[a+"="+b];if(c){var e=new Date;e.setTime(e.getTime()+24*c*3600*1e3),d.push("expires="+e.toGMTString())}d.push("path=/"),document.cookie=d.join("; ")},get:function(a){var d,b=a+"=",c=document.cookie.split(";");for(d=0;d<c.length;d++){var e=c[d].trim();if(0===e.indexOf(b))return e.substring(b.length)}return null}},m={active:!1,mouseLeftWindow:function(a){var b;a=a?a:window.event,b=a.relatedTarget||a.toElement,b&&"HTML"!==b.nodeName||m.open()},setDimension:function(a,b){b.toString().indexOf("%")===-1&&(b+="px"),j.style[a]=b},attachEvents:function(){function a(a){m.destroy(),a.preventDefault()}document.addEventListener("mouseout",m.mouseLeftWindow,!1),i.addEventListener("click",a),k&&k.addEventListener("click",a),f.closeOnOutsideClick&&(g.addEventListener("click",a),j.addEventListener("click",function(a){a.stopPropagation()})),this.active=!0},detachEvents:function(){document.removeEventListener("mouseout",m.mouseLeftWindow)},open:function(){var a=this;g.classList.add("visible"),h.classList.add("visible"),a.detachEvents(),setTimeout(function(){a.setDimension("width",f.width),a.setDimension("height","auto")},20),setTimeout(function(){g.classList.add("finished")},200)},destroy:function(){this.active&&(m.detachEvents(),setTimeout(function(){g.parentNode.removeChild(g),h.classList.remove("visible")},200),f.debug||l.set(f.cookieName,1,f.cookieValidity))}};if(!l.get("ysExit")){if("number"!=typeof f.delay)throw new Error("options.delay must be a numeric value");if(!g)throw new Error("Could not find element with selector: "+f.target);if(g.parentNode!==document.body)throw new Error(f.target+" element must be placed directly inside of the <body> element");setTimeout(p(m,m.attachEvents),f.delay)}return{open:p(m,m.open),destroy:p(m,m.destroy),getElement:function(){return g}}}}(jQuery);